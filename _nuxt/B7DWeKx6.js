function l(n){return typeof n=="string"?`'${n}'`:new f().serialize(n)}const f=(function(){class n{#r=new Map;compare(r,e){const t=typeof r,s=typeof e;return t==="string"&&s==="string"?r.localeCompare(e):t==="number"&&s==="number"?r-e:String.prototype.localeCompare.call(this.serialize(r,!0),this.serialize(e,!0))}serialize(r,e){if(r===null)return"null";switch(typeof r){case"string":return e?r:`'${r}'`;case"bigint":return`${r}n`;case"object":return this.$object(r);case"function":return this.$function(r)}return String(r)}serializeObject(r){const e=Object.prototype.toString.call(r);if(e!=="[object Object]")return this.serializeBuiltInType(e.length<10?`unknown:${e}`:e.slice(8,-1),r);const t=r.constructor,s=t===Object||t===void 0?"":t.name;if(s!==""&&globalThis[s]===t)return this.serializeBuiltInType(s,r);if(typeof r.toJSON=="function"){const o=r.toJSON();return s+(o!==null&&typeof o=="object"?this.$object(o):`(${this.serialize(o)})`)}return this.serializeObjectEntries(s,Object.entries(r))}serializeBuiltInType(r,e){const t=this["$"+r];if(t)return t.call(this,e);if(typeof e?.entries=="function")return this.serializeObjectEntries(r,e.entries());throw new Error(`Cannot serialize ${r}`)}serializeObjectEntries(r,e){const t=Array.from(e).sort((o,a)=>this.compare(o[0],a[0]));let s=`${r}{`;for(let o=0;o<t.length;o++){const[a,c]=t[o];s+=`${this.serialize(a,!0)}:${this.serialize(c)}`,o<t.length-1&&(s+=",")}return s+"}"}$object(r){let e=this.#r.get(r);return e===void 0&&(this.#r.set(r,`#${this.#r.size}`),e=this.serializeObject(r),this.#r.set(r,e)),e}$function(r){const e=Function.prototype.toString.call(r);return e.slice(-15)==="[native code] }"?`${r.name||""}()[native]`:`${r.name}(${r.length})${e.replace(/\s*\n\s*/g,"")}`}$Array(r){let e="[";for(let t=0;t<r.length;t++)e+=this.serialize(r[t]),t<r.length-1&&(e+=",");return e+"]"}$Date(r){try{return`Date(${r.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(r){return`ArrayBuffer[${new Uint8Array(r).join(",")}]`}$Set(r){return`Set${this.$Array(Array.from(r).sort((e,t)=>this.compare(e,t)))}`}$Map(r){return this.serializeObjectEntries("Map",r.entries())}}for(const i of["Error","RegExp","URL"])n.prototype["$"+i]=function(r){return`${i}(${r})`};for(const i of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])n.prototype["$"+i]=function(r){return`${i}[${r.join(",")}]`};for(const i of["BigInt64Array","BigUint64Array"])n.prototype["$"+i]=function(r){return`${i}[${r.join("n,")}${r.length>0?"n":""}]`};return n})();function u(n,i){return n===i||l(n)===l(i)}function $(n){return n==null}function y(n,i){return $(n)?!1:Array.isArray(n)?n.some(r=>u(r,i)):u(n,i)}export{y as a,$ as b,u as i};
